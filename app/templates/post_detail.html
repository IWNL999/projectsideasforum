{% extends 'base.html' %}

{% block title %}
{{ article.title }}
{% endblock %}

{% block content %}
  <div class="container">
        {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class="flashes">
          {% for message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
    <div class="row">
      <div class="col-md-8">
        <h1>{{ article.title }}</h1>
        <p>{{ article.intro }}</p>
        <p>{{ article.text }}</p>

        <div class="post-comments">
            <h2>Комментарии</h2>
            {% if comments %}
                <ul class="list-unstyled">
                    {% for comment in comments %}
                        <li class="comment">
                            <p class="comment-text">{{ comment.text }}</p>
                            <small class="text-muted comment-date">{{ comment.date.strftime('%Y-%m-%d %H:%M') }}</small>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>На данный момент у поста нет комментариев, напишите первый!</p>
            {% endif %}
        </div>


        <h2>Добавить комментарий</h2>
        <form method="post" action="{{ url_for('main.post_detail', id=article.id) }}">
          {{ form.hidden_tag() }}
          <div class="form-group">
            {{ form.text.label(class="form-control-label") }}
            {{ form.text(class="form-control") }}
          </div>
          <div class="form-group">
            {{ form.submit(class="btn btn-primary") }}
          </div>
        </form>

      </div>
    </div>
  </div>
{% endblock %}
